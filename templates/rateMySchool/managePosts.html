{% extends 'partials/dashboardbase.html' %} {% load socialaccount %}
{% block content %}

{%if user.is_staff%}
<div class="row pt-3 mt-3">
    <div class="col-md-2">
    </div>
    <div class="col-md-8 shadow">
        <h1> Posts report (internal use only)</h1>
    </div>
    <div class="col-md-2">
    </div>
    </div>
</div>
<div class="row mb-3 mt-3 pt-2">
    <div class="col-md-2">
    </div>
    <div class="col-md-8">
    <table>
    <tr>
        <th>User</th>
        <th>Post Content</th>
        <th>Reported</th>
        <th>Upvotes</th>
        <th>DownVotes</th>
    
    </tr>
{%for post in posts%}
        <tr>
            <th><a href="{%url 'manageuser' post.raterUser.id%}"> {{post.raterUser}}</a></th>
            <th><a href="{%url 'postdetail' post.id%}">{{post.postcontent|safe|linebreaks|truncatewords:5}}</a></th>
            <th>{{post.postreportedUsers.all.count}}</th>
            <th>{{post.upvoteCount}}</th>
            <th>{{post.downvoteCount}}</th>
            <!--if the user is already blocked or not-->
        </tr>
        
        
        </div>
        <div class="col-md-2">
        </div>
      </div>
    </div>
{%endfor%}
</table>

{%else%}
Sorry, you are not allowed to access this page!

{%endif%}
{%endblock content%}